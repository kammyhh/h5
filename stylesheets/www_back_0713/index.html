<!DOCTYPE html>
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="chrome=1,IE=edge" />
	<title>TSX</title>

	<style>
		html {
			height:100%;
		}
		body {
			background:url("images/00000.png");
			margin:0;
			height:100%;
		}
    div.drum-wrapper {
      float: left;
    }

    div.drum {
      transition-duration: 0.2s;
      -webkit-transition-duration: 0.2s;
    }
    div.drum figure {
      text-align: left;
    }
    #drum_month {
      width: 80px;
    }
    #drum_date {
      margin-left: 20px;
      width: 50px;
      margin-right: 20px;
    }
    #drum_fullYear {
      width: 100px;
    }

    div.date-wrapper {
      width: 300px;
    }
    div.date-wrapper form {
      position: relative;
    }
    }

    #wrapper {
      position:relative;
      z-index:1;
      height:200px;
      overflow:hidden;
    }
    #ta_content {
      width: 200px;
      height: 600px;
    }

  </style>

	<meta name="viewport" content="user-scalable=no, width=320" />
    <script src="lib/jquery-1.9.1.js"></script>
    <script src="lib/hammer.min.js"></script>
    <script src="lib/iscroll.js"></script>
    <script src="lib/hammer.fakemultitouch.js"></script>
    <script type="text/javascript" charset="utf-8" src="index.hyperesources/index_hype_generated_script.js?52229"></script>
    <link rel="stylesheet" href="lib/drum.css"></link>
    <script src="lib/drum.js"></script>
	<audio id="bgm" src="audios/20150706.mp3" preload="auto" loop="loop"></audio>

  <script>
    document.onreadystatechange = function(){
      if(document.readyState=="complete")
      {
        document.getElementById("index_hype_container").style.display ="block";
      }
    };
    var max=0;
    var sd=15;  //这里是控制速度的
    var txt,lentxt,go;
    function textlist()
    {
      if (max>=lentxt){clearTimeout(go);}
      document.getElementById('ta_content').innerHTML+=txt.substr(max,1);
      document.getElementById('ta_content').innerHTML=document.getElementById('ta_content').innerHTML.replace(/\%\$/ig,'<br>');
      document.getElementById('ta_content').innerHTML=document.getElementById('ta_content').innerHTML.replace(/\n/g, "<br>");
      max++
    }
    function textticker()
    {
      txt=document.getElementById('ta_content').innerHTML;
      txt=txt.replace(/\<br\>/ig,'%$')
      lentxt=txt.length;
      document.getElementById('ta_content').innerHTML='';
      go = setInterval(textlist, sd);
    }

    function getIndexForValue(elem, value) {
      for (var i=0; i<elem.options.length; i++)
        if (elem.options[i].value == value)
          return i;
    }
    $(document).ready(function () {
      $("select.date").drum({
        interactive: false
      });
    });
    function onload() {
      document.addEventListener('touchmove', function (e) {
        e.preventDefault();
      }, false);
      play();
      setTimeout("document.getElementById('play').style.visibility = 'visible'", 2000);
    }
    function play() {
      var bgm = document.getElementById("bgm");
      if (bgm.paused) {
        bgm.play();
        document.getElementById('play').src = 'images/musicon.png';
      } else {
        bgm.pause();
        document.getElementById('play').src = 'images/musicoff.png';
      }
    }
    function format() {
      var birthday = $('#fullYear option:selected').val() + '-'
      + $('#month option:selected').val() + '-' + $('#date option:selected').val();
      $.ajax({
        type:"GET",
        data:"birthday=" + birthday,
        url:"../api/promotion",
        success:function(msg){
          document.getElementById('content').value = 'msg';
        },
        error:function(e){
          alert(e);
        }
      });
    }
    var myScroll;
    function loaded() {
      setTimeout( function() {
        document.ontouchmove = function(e) { e.preventDefault(); return false; }
        myScroll = new iScroll( document.getElementById('ta_content') );
      }, 100);
    }
    window.addEventListener('load', loaded, true);

  </script>

  </head>

  <body onload="onload()" >


  <!--birthday frame-->
  <div id='birthday' style="z-index: 1000; position: absolute; left: 30px; top: 80px; visibility: hidden">
    <img src="images/birthday_frame.png" style="position: absolute;left :0px;top: -10px;width:255px;height:50px">
    <textarea id="ta_birthday" name="bd" readonly ="readonly" style="z-index: 1000;border:0;overflow: visible;
    font-size: 19px;color: #FFFFFF;
    background-color: transparent;
    position: absolute; left: 30px; top: 0px;
    "></textarea>
  </div>

  <!--content frame-->
  <div id='content' style="z-index: 1000; position: absolute; left: 60px; top: 150px; height:240px; width:200px; visibility: hidden;">
    <img src="images/content_frame.png" style="position: absolute;left:-25px;top: -25px;width:250px; height:300px">
    <div id="wrapper" style="height: 250px; width: 200px; overflow: hidden;position:relative;">
      <div id="ta_content" style="line-height: 20px;font-size: 12px;color:#FFFFFF; position: absolute; left:0px; top:0px;
      "></div>
    </div>
  </div>

  <!--date picker-->
  <div id='datepicker' style="z-index: 1000;position: absolute;left: 25px;top: 158px;visibility: hidden">

    <img src="images/year_frame.png" style="position: absolute;left:-8px;top: -25px;width:120px;">
    <img src="images/month_frame.png" style="position: absolute;left:174px;top: -25px;width:100px;">
    <img src="images/date_frame.png" style="position: absolute;left:101px;top: -25px;width:80px;">

    <div class="date-wrapper">
      <form name="date">
      <select class="date" id="fullYear" name="fullYear">
        <option value="1980">年</option>
        <option value="1980">1980</option>
        <option value="1981">1981</option>
        <option value="1982">1982</option>
        <option value="1983">1983</option>
        <option value="1984">1984</option>
        <option value="1985">1985</option>
        <option value="1986">1986</option>
        <option value="1987">1987</option>
        <option value="1988">1988</option>
        <option value="1989">1989</option>
        <option selected value="1990">年</option>
        <option value="1990">1990</option>
        <option value="1991">1991</option>
        <option value="1992">1992</option>
        <option value="1993">1993</option>
        <option value="1994">1994</option>
        <option value="1995">1995</option>
        <option value="1996">1996</option>
        <option value="1997">1997</option>
        <option value="1998">1998</option>
        <option value="1999">1999</option>
        <option value="2000">2000</option>
        <option value="2001">2001</option>
        <option value="2002">2002</option>
        <option value="2003">2003</option>
        <option value="2004">2004</option>
        <option value="2005">2005</option>
        <option value="2006">2006</option>
        <option value="2007">2007</option>
        <option value="2008">2008</option>
        <option value="2009">2009</option>
        <option value="2010">2010</option>
        <option value="2011">2011</option>
        <option value="2012">2012</option>
        <option value="2013">2013</option>
        <option value="2014">2014</option>
        <option value="2015">2015</option>
      </select>
      <select class="date" id="month" name="month">
        <option value="07">7</option>
        <option value="08">8</option>
        <option value="09">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="01">1</option>
        <option value="02">2</option>
        <option value="03">3</option>
        <option value="04">4</option>
        <option value="05">5</option>
        <option value="06">6</option>
        <option selected value="07">月</option>
        <option value="07">7</option>
        <option value="08">8</option>
        <option value="09">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="01">1</option>
        <option value="02">2</option>
        <option value="03">3</option>
        <option value="04">4</option>
        <option value="05">5</option>
        <option value="06">6</option>
      </select>
      <select class="date" id="date" name="date">
        <option value="01">1</option>
        <option value="02">2</option>
        <option value="03">3</option>
        <option value="04">4</option>
        <option value="05">5</option>
        <option value="06">6</option>
        <option value="07">7</option>
        <option value="08">8</option>
        <option value="09">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option selected value="15">日</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
      </select>
      </form>
    </div>
  </div>

  <!--music toggle-->
  <div onclick="format()" style="height: 40px; width: 40px;z-index: 100;position: absolute;right: 0;top: 5px;visibility: hidden" >
    <input id='play' type="image" src = 'images/musicon.png' onclick="play()" width="100%" height="100%">
  </div>

  <!--animation-->
  <div id="index_hype_container" style="display:none;  margin:auto;position:relative;width:100%;height:100%;overflow:hidden;" aria-live="polite">
  </div>

  </body>
</html>
